<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>í« í´ë¦¬ì»¤ FINAL v2</title>

<style>
body{
  margin:0;
  background:linear-gradient(135deg,#2a2a3f,#1b1b2b);
  font-family:sans-serif;
  color:white;
  text-align:center;
}
.panel{
  background:#2f2f4a;
  margin:10px auto;
  padding:15px;
  border-radius:14px;
  width:90%;
  max-width:420px;
}
button{
  width:100%;
  padding:14px;
  margin:6px 0;
  border:none;
  border-radius:10px;
  font-size:18px;
  background:#4a7dff;
  color:white;
  cursor:pointer;
}
#foodBtn{
  font-size:60px;
  background:none;
}
#pet{
  font-size:90px;
  transition:0.2s;
}
#resetBtn{background:#ff5c5c;}
</style>
</head>
<body>

<h2>ğŸ¶ í« í´ë¦¬ì»¤ FINAL v2</h2>

<div class="panel">
ğŸ’° ëˆ: <span id="money">0</span><br>
ğŸ ìŒì‹: <span id="food">0</span><br>
â¬† íŒŒì›Œ: <span id="power">1</span><br>
âš¡ í´ë¦­ì†ë„: <span id="delayLabel">1.0</span>ì´ˆ<br>
â­ ëª…ì„±: <span id="prestige">0</span><br>
ğŸ—¿ ë™ìƒ: <span id="statue">1</span>x<br>
ğŸ“ˆ ë°°ìˆ˜: <span id="multi">1</span>x
</div>

<div class="panel">
<button id="foodBtn">ğŸ</button>
<button id="upgradeBtn"></button>
<button id="speedBtn"></button>
<button id="gachaBtn">ğŸ—¿ ë™ìƒ ë½‘ê¸° (50)</button>
<button id="feedBtn">ğŸ¶ ì „ë¶€ ë¨¹ì´ê¸°</button>
<button id="sellBtn">ğŸ’° í« íŒë§¤</button>
<button id="prestigeBtn"></button>
<button id="resetBtn">ğŸ”„ ë¦¬ì…‹</button>
</div>

<div class="panel">
<div id="pet">ğŸ£</div>
ë‹¨ê³„: <span id="stage">1</span><br>
í¬ê¸°: <span id="sizeLabel">1</span>
</div>

<script>
// ================= ì €ì¥
const KEY="petGame_FINAL_V2";

function save(){localStorage.setItem(KEY,JSON.stringify(data));}
function load(){return JSON.parse(localStorage.getItem(KEY));}

// ================= ë°ì´í„°
let data=load()||{
  money:0,
  food:0,
  power:1,
  petXP:0,
  prestige:0,
  statue:1,
  clickDelay:1000,
  speedLevel:0
};

// ================= ê³„ì‚°
function multi(){
  return (1+data.prestige/100)*data.statue;
}

function powerCost(){
  return Math.floor(20*Math.pow(1.5,data.power));
}

function speedCost(){
  return 10*(data.speedLevel+1); // â­ 10,20,30,40...
}

function prestigeGain(){
  return Math.floor(data.money/10);
}

// ================= í´ë¦­ ì œí•œ
let lastClick=0;

function clickFood(){
  let now=Date.now();
  if(now-lastClick<data.clickDelay) return;

  lastClick=now;

  let gain=Math.floor(data.power*multi());
  data.food+=gain;

  pop();
}

// ================= íŒŒì›Œ ì—…
function upgradePower(){
  let c=powerCost();
  if(data.money>=c){
    data.money-=c;
    data.power++;
  }
}

// ================= â­ ì†ë„ ì—… (0.2ì´ˆ ê°ì†Œ + ê°€ê²© ì¦ê°€í˜•)
function upgradeSpeed(){
  let c=speedCost();

  if(data.money<c) return;
  if(data.clickDelay<=200) return;

  data.money-=c;
  data.clickDelay-=200;
  data.speedLevel++;
}

// ================= ë™ìƒ ê°€ì± 
function gacha(){
  if(data.money<50) return;

  data.money-=50;

  let r=Math.random();

  if(r<0.6) data.statue=1.1;
  else if(r<0.9) data.statue=1.5;
  else if(r<0.99) data.statue=2;
  else data.statue=4;
}

// ================= ë¨¹ì´/íŒë§¤
function feed(){
  data.money+=data.food*2;
  data.petXP+=data.food;
  data.food=0;
}

function sell(){
  data.money+=data.petXP*3;
  data.petXP=0;
}

// ================= ëª…ì„±
function prestigeUp(){
  let g=prestigeGain();
  if(g<=0) return;

  if(!confirm("ì´ˆê¸°í™” í›„ ëª…ì„± ìƒìŠ¹?")) return;

  data.prestige+=g;

  data.money=0;
  data.food=0;
  data.power=1;
  data.petXP=0;
  data.statue=1;
  data.clickDelay=1000;
  data.speedLevel=0;
}

// ================= ë¦¬ì…‹
function resetAll(){
  localStorage.removeItem(KEY);
  location.reload();
}

// ================= í« ë‹¨ê³„
function stage(){
  return Math.min(Math.floor(data.petXP/100),5);
}

// ================= UI ì—…ë°ì´íŠ¸
function update(){

  money.textContent=data.money;
  food.textContent=data.food;
  power.textContent=data.power;
  prestige.textContent=data.prestige;
  statue.textContent=data.statue;

  multi.textContent=multi().toFixed(2);

  delayLabel.textContent=(data.clickDelay/1000).toFixed(1);

  upgradeBtn.textContent="â¬† íŒŒì›Œ ì—… ("+powerCost()+")";
  speedBtn.textContent="âš¡ ì†ë„ ì—… ("+speedCost()+")";
  prestigeBtn.textContent="â­ ëª…ì„± ìƒìŠ¹ (+"+prestigeGain()+")";

  let s=stage();

  // ğŸ£ â†’ ğŸ¤ â†’ ğŸ¶ â†’ ğŸ¦ â†’ ğŸ² â†’ ğŸ¦…
  pet.textContent=["ğŸ£","ğŸ¤","ğŸ¶","ğŸ¦","ğŸ²","ğŸ¦…"][s];

  let size=1+Math.min(data.petXP/100,1)*0.8;
  pet.style.transform="scale("+size+")";
  sizeLabel.textContent=size.toFixed(2);

  save();
}

// ================= í´ë¦­ íš¨ê³¼
function pop(){
  foodBtn.style.transform="scale(1.2)";
  setTimeout(()=>foodBtn.style.transform="scale(1)",100);
}

// ================= ì´ë²¤íŠ¸
foodBtn.onclick=clickFood;
upgradeBtn.onclick=upgradePower;
speedBtn.onclick=upgradeSpeed;
gachaBtn.onclick=gacha;
feedBtn.onclick=feed;
sellBtn.onclick=sell;
prestigeBtn.onclick=prestigeUp;
resetBtn.onclick=resetAll;

setInterval(update,100);
update();

</script>

</body>
</html>
