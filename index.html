<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>í«. í´ë¦¬ì»¤ ì‹œë®¬ë ˆì´í„° - Pet Clicker Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<style>
body{
  margin:0;
  background:linear-gradient(135deg,#2a2a3f,#1b1b2b);
  font-family:sans-serif;
  color:white;
  text-align:center;
}
.panel{
  background:#2f2f4a;
  margin:10px auto;
  padding:15px;
  border-radius:14px;
  width:90%;
  max-width:400px;
}
button{
  width:100%;
  padding:14px;
  margin:6px 0;
  border:none;
  border-radius:10px;
  font-size:18px;
  background:#4a7dff;
  color:white;
  cursor:pointer;
}
button:disabled{background:#555;}
#resetBtn{background:#ff5c5c;}
#foodBtn{
  font-size:60px;
  background:none;
}
#pet{
  font-size:80px;
  transition:0.2s;
}
</style>
</head>
<body>

<h2>ğŸ¶ í« í´ë¦¬ì»¤</h2>

<div class="panel">
ğŸ’° ëˆ: <span id="money">0</span><br>
ğŸ ìŒì‹: <span id="food">0</span><br>
â¬† íŒŒì›Œ: <span id="power">1</span><br>
â­ ëª…ì„±: <span id="prestige">0</span><br>
ğŸ—¿ ë™ìƒ: <span id="statue">1</span>x<br>
ğŸ“ˆ ì„±ì¥ë°°ìˆ˜: <span id="multi">1</span>x
</div>

<div class="panel">

<button id="foodBtn">ğŸ</button>

<button id="upgradeBtn"></button>

<button id="feedBtn">ğŸ¶ ì „ë¶€ ë¨¹ì´ê¸°</button>

<button id="sellBtn">ğŸ’° í« íŒë§¤</button>

<button id="gachaBtn"></button>

<button id="prestigeBtn"></button>

<button id="resetBtn">ğŸ”„ ì „ì²´ ë¦¬ì…‹</button>

</div>

<div class="panel">
<div id="pet">ğŸ£</div>
ë‹¨ê³„: <span id="stage">1</span>
í¬ê¸°: <span id="sizeLabel">1</span>
</div>

<script>
// ================= ì¿ í‚¤ ê¸°ë³¸ í•¨ìˆ˜
function setCookie(name,value,days=365){
  const d=new Date();
  d.setTime(d.getTime()+days*24*60*60*1000);
  document.cookie=`${name}=${encodeURIComponent(JSON.stringify(value))};expires=${d.toUTCString()};path=/`;
}

function getCookie(name){
  const value=document.cookie.match('(^|;)\\s*'+name+'\\s*=\\s*([^;]+)');
  return value ? JSON.parse(decodeURIComponent(value[2])) : null;
}

function deleteCookie(name){
  document.cookie=`${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;
}

// ================= ë¸Œë¼ìš°ì €ë³„ UUID ìƒì„±
function getUserID(){
  let id=getCookie("petUserID");
  if(!id){
    id="user_"+Math.random().toString(36).substr(2,9);
    setCookie("petUserID",id);
  }
  return id;
}

const USER_ID = getUserID();
const SAVE_KEY = "petGame_"+USER_ID;

// ================= ë°ì´í„° ì´ˆê¸°í™”
let data = getCookie(SAVE_KEY) || {
  money:0, food:0, power:1, petXP:0, prestige:0, statue:1
};

// ================= ì €ì¥
function save(){
  setCookie(SAVE_KEY,data);
}

// ================= ê³„ì‚°
function getMultiplier(){ return (1+data.prestige/100)*data.statue; }
function getUpgradeCost(){ return Math.floor(20*Math.pow(1.5,data.power)); }
function getPrestigeGain(){ return Math.floor(data.money/10); }
function getGachaCost(){ return 50; }

// ================= í´ë¦­
function clickFood(){
  let gain=Math.floor(data.power*getMultiplier());
  data.food+=gain;
  popEffect();
}

// ================= ì—…ê·¸ë ˆì´ë“œ
function upgrade(){
  let cost=getUpgradeCost();
  if(data.money>=cost){ data.money-=cost; data.power++; }
}

// ================= ë¨¹ì´
function feedPet(){
  if(data.food<=0)return;
  data.money+=data.food*2;
  data.petXP+=data.food;
  data.food=0;
}

// ================= íŒë§¤
function sellPet(){
  data.money+=data.petXP*3;
  data.petXP=0;
}

// ================= ë™ìƒ ê°€ì± 
function gacha(){
  if(data.money<getGachaCost()) return;
  data.money-=getGachaCost();
  let r=Math.random();
  if(r<0.6) data.statue=1.1;
  else if(r<0.9) data.statue=1.5;
  else if(r<0.99) data.statue=2;
  else data.statue=4;
}

// ================= ëª…ì„± í™˜ìƒ
function prestigeUp(){
  let gain=getPrestigeGain();
  if(gain<=0)return;
  if(!confirm("ëª…ì„± ìƒìŠ¹ ì‹œ ëª¨ë“  ê²ƒì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤!")) return;
  data.prestige+=gain;
  data.money=0;
  data.food=0;
  data.power=1;
  data.petXP=0;
  data.statue=1;
  save();
}

// ================= ì „ì²´ ë¦¬ì…‹
function hardReset(){
  if(confirm("ê²Œì„ì„ ì²˜ìŒë¶€í„° ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){
    deleteCookie(SAVE_KEY);
    data={money:0, food:0, power:1, petXP:0, prestige:0, statue:1};
    save();
    update();
    alert("ê²Œì„ì´ ì²˜ìŒë¶€í„° ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤!");
  }
}

// ================= í« ë‹¨ê³„
function getPet(){ 
  let stage=Math.floor(data.petXP/100);
  stage=Math.min(stage,4);
  return stage;
}

// ================= UI ì—…ë°ì´íŠ¸
function update(){
  money.textContent=data.money;
  food.textContent=data.food;
  power.textContent=data.power;
  prestige.textContent=data.prestige;
  statue.textContent=data.statue;
  multi.textContent=getMultiplier().toFixed(2);

  upgradeBtn.textContent="â¬† ì—…ê·¸ë ˆì´ë“œ (ë¹„ìš©: "+getUpgradeCost()+")";
  gachaBtn.textContent="ğŸ—¿ ë™ìƒ ë½‘ê¸° (ë¹„ìš©: "+getGachaCost()+")";
  prestigeBtn.textContent="â­ ëª…ì„± ìƒìŠ¹ (+"+getPrestigeGain()+")";
  prestigeBtn.disabled=getPrestigeGain()<=0;

  let stage=getPet();
  pet.textContent=["ğŸ£","ğŸ¤","ğŸ¶","ğŸº","ğŸ²"][stage];

  let size=1+Math.min(data.petXP/100,1)*0.8;
  pet.style.transform=`scale(${size})`;
  sizeLabel.textContent=size.toFixed(2);

  save();
}

// ================= í´ë¦­ ì• ë‹ˆ
function popEffect(){
  foodBtn.style.transform="scale(1.2)";
  setTimeout(()=>foodBtn.style.transform="scale(1)",100);
}

// ================= ëª¨ë°”ì¼ í„°ì¹˜ ì´ë²¤íŠ¸
foodBtn.addEventListener("touchstart", clickFood);
upgradeBtn.addEventListener("touchstart", upgrade);
gachaBtn.addEventListener("touchstart", gacha);
prestigeBtn.addEventListener("touchstart", prestigeUp);
feedBtn.addEventListener("touchstart", feedPet);
sellBtn.addEventListener("touchstart", sellPet);
resetBtn.addEventListener("touchstart", hardReset);

// ================= PC í´ë¦­ ì´ë²¤íŠ¸
foodBtn.addEventListener("click", clickFood);
upgradeBtn.addEventListener("click", upgrade);
gachaBtn.addEventListener("click", gacha);
prestigeBtn.addEventListener("click", prestigeUp);
feedBtn.addEventListener("click", feedPet);
sellBtn.addEventListener("click", sellPet);
resetBtn.addEventListener("click", hardReset);

// ================= ì‹œì‘
update();
setInterval(update,100);
</script>

</body>
</html>
