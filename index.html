<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ğŸ¶ í« í´ë¦¬ì»¤ ULTIMATE FINAL+</title>

<style>
body{
margin:0;
background:linear-gradient(135deg,#2a2a3f,#1b1b2b);
font-family:sans-serif;
color:white;
text-align:center;
}

.panel{
background:#2f2f4a;
margin:10px auto;
padding:15px;
border-radius:14px;
width:330px;
}

button{
width:100%;
padding:12px;
margin:6px 0;
border:none;
border-radius:10px;
font-size:16px;
background:#4a7dff;
color:white;
cursor:pointer;
}

button:disabled{background:#555;}
#resetBtn{background:#ff5c5c;}

#foodBtn{
font-size:70px;
background:none;
}

#pet{
font-size:90px;
transition:0.2s;
}
</style>
</head>
<body>

<h2>ğŸ¶ í« í´ë¦¬ì»¤</h2>

<div class="panel">
ğŸ’° ëˆ: <span id="money">0</span><br>
ğŸ ìŒì‹: <span id="food">0</span><br>
â¬† íŒŒì›Œ: <span id="power">1</span><br>
â­ ëª…ì„±: <span id="prestige">0</span><br>
ğŸ—¿ ë™ìƒ: <span id="statue">1</span>x<br>
ğŸ“ˆ ì„±ì¥ë°°ìˆ˜: <span id="multi">1</span>x
</div>

<div class="panel">

<button id="foodBtn" onclick="clickFood()">ğŸ</button>

<button id="upgradeBtn" onclick="upgrade()"></button>

<button onclick="feedPet()">ğŸ¶ ì „ë¶€ ë¨¹ì´ê¸°</button>

<button onclick="sellPet()">ğŸ’° í« íŒë§¤</button>

<button id="gachaBtn" onclick="gacha()"></button>

<button id="prestigeBtn" onclick="prestigeUp()"></button>

<button id="resetBtn" onclick="hardReset()">ğŸ”„ ì „ì²´ ë¦¬ì…‹</button>

</div>

<div class="panel">
<div id="pet">ğŸ£</div>
ë‹¨ê³„: <span id="stage">1</span>
</div>

<script>

const SAVE_KEY="petClickerUltimateTrueFinal";

let data = JSON.parse(localStorage.getItem(SAVE_KEY)) || {
money:0,
food:0,
power:1,
petXP:0,
prestige:0,
statue:1
};

function save(){
localStorage.setItem(SAVE_KEY,JSON.stringify(data));
}

/* ========= ê³„ì‚° ========= */

function getMultiplier(){
return (1 + data.prestige/100) * data.statue;
}

function getUpgradeCost(){
return Math.floor(20*Math.pow(1.5,data.power));
}

function getPrestigeGain(){
return Math.floor(data.money/10);
}

function getGachaCost(){
return 50;
}

/* ========= í´ë¦­ ========= */

function clickFood(){

let gain=Math.floor(data.power*getMultiplier());

data.food+=gain;

popEffect();
}

/* ========= ì—…ê·¸ë ˆì´ë“œ ========= */

function upgrade(){

let cost=getUpgradeCost();

if(data.money>=cost){
data.money-=cost;
data.power++;
}
}

/* ========= ë¨¹ì´ ========= */

function feedPet(){

if(data.food<=0)return;

data.money+=data.food*2;
data.petXP+=data.food;

data.food=0;
}

/* ========= íŒë§¤ ========= */

function sellPet(){

data.money+=data.petXP*3;
data.petXP=0;
}

/* ========= ë™ìƒ ========= */

function gacha(){

let cost=getGachaCost();

if(data.money<cost)return;

data.money-=cost;

let r=Math.random();

if(r<0.6)data.statue=1.1;
else if(r<0.9)data.statue=1.5;
else if(r<0.99)data.statue=2;
else data.statue=4;
}

/* ========= ëª…ì„± (í™˜ìƒ) ========= */

function prestigeUp(){

let gain=getPrestigeGain();

if(gain<=0)return;

if(!confirm("ëª…ì„± ìƒìŠ¹ ì‹œ ëª¨ë“  ê²ƒì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤!")) return;

data.prestige+=gain;

/* â­ ì „ì²´ ë¦¬ì…‹ */
data.money=0;
data.food=0;
data.power=1;
data.petXP=0;
data.statue=1;
}

/* ========= ë¦¬ì…‹ ========= */

function hardReset(){
if(confirm("ê²Œì„ ë°ì´í„° ì‚­ì œ?")){
localStorage.removeItem(SAVE_KEY);
location.reload();
}
}

/* ========= UI ========= */

function update(){

money.textContent=data.money;
food.textContent=data.food;
power.textContent=data.power;
prestige.textContent=data.prestige;
statue.textContent=data.statue;
multi.textContent=getMultiplier().toFixed(2);

upgradeBtn.textContent="â¬† ì—…ê·¸ë ˆì´ë“œ (ë¹„ìš©: "+getUpgradeCost()+")";
gachaBtn.textContent="ğŸ—¿ ë™ìƒ ë½‘ê¸° (ë¹„ìš©: "+getGachaCost()+")";
prestigeBtn.textContent="â­ ëª…ì„± ìƒìŠ¹ (+"+getPrestigeGain()+")";

prestigeBtn.disabled=getPrestigeGain()<=0;

save();
}

setInterval(update,100);

function popEffect(){
foodBtn.style.transform="scale(1.2)";
setTimeout(()=>foodBtn.style.transform="scale(1)",100);
}

</script>
</body>
</html>
